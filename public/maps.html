<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Google Maps APIs</title>

	
</head>

<body>

    
    <div id="map"></div>
    <div id="msg">

    </div>
    <div>
        <!-- <a onclick="mapao(33.998525, -80.994108, 'Dreher High School', 'Amble', '3319 Millwood Ave', 'Columbia', 'SC', '29205')">Dreher High School</a><br /><br /> -->
        <a href="https://goo.gl/maps/r3ADP" target="_blank" class="ao-location" data-lat="33.998525" data-lng="-80.994108" data-location="Dreher High School" data-workout="amble" data-line1="3319 Millwood Ave" data-line2="Columbia, SC 29205">Dreher High School</a><br />
<a href="https://goo.gl/maps/THKgy" target="_blank" class="ao-location" data-lat="33.9720227" data-lng="-80.9668456" data-location="Woodland Park" data-workout="stumble" data-line1="6500 Olde Knight Pkwy" data-line2="Columbia, SC 29209">Woodland Park</a><br />
<a href="https://goo.gl/maps/paFEp" target="_blank" class="ao-location" data-lat="34.0182692" data-lng="-80.9648756" data-location="Trenholm Park" data-workout="scramble" data-line1="3900 Covenant" data-line2="Columbia, SC 29204">Trenholm Park</a><br />
<a href="https://goo.gl/maps/x0MXJ" target="_blank" class="ao-location" data-lat="33.998694" data-lng="-81.006017" data-location="Shandon Presbyterian" data-workout="ramble" data-line1="607 Woodrow St" data-line2="Columbia, SC 29205">Shandon Presbyterian</a><br />
<a href="https://goo.gl/maps/Z4vsC" target="_blank" class="ao-location" data-lat="33.994658" data-lng="-81.0273863" data-location="Intersection of Bull & Blossom" data-workout="the bull" data-line1="Blossom St & Bull St" data-line2="Columbia, SC 29208">Intersection of Bull & Blossom</a><br />
<a href="https://goo.gl/maps/r3ADP" target="_blank" class="ao-location" data-lat="33.998525" data-lng="-80.994108" data-location="Dreher High School" data-workout="brickpile" data-line1="3319 Millwood Ave" data-line2="Columbia, SC 29205">Dreher High School</a><br />
<a href="https://goo.gl/maps/THKgy" target="_blank" class="ao-location" data-lat="33.9720227" data-lng="-80.9668456" data-location="Woodland Park" data-workout="grit" data-line1="6500 Olde Knight Pkwy" data-line2="Columbia, SC 29209">Woodland Park</a><br />
<a href="https://goo.gl/maps/FkaUkbzMgKS2" target="_blank" class="ao-location" data-lat="33.9927778" data-lng="-80.9504083" data-location="Kings Grant Clubhouse" data-workout="castle" data-line1="300 N Kings Grant Dr" data-line2="Columbia, SC 29209">Kings Grant Clubhouse</a><br />
<a href="https://goo.gl/maps/r3ADP" target="_blank" class="ao-location" data-lat="33.998525" data-lng="-80.994108" data-location="Dreher High School" data-workout="brickpile" data-line1="3319 Millwood Ave" data-line2="Columbia, SC 29205">Dreher High School</a><br />
<a href="https://goo.gl/maps/r3ADP" target="_blank" class="ao-location" data-lat="33.998525" data-lng="-80.994108" data-location="Dreher High School" data-workout="score" data-line1="3319 Millwood Ave" data-line2="Columbia, SC 29205">Dreher High School</a><br />
<a href="https://goo.gl/maps/vcOuI" target="_blank" class="ao-location" data-lat="34.016526" data-lng="-80.973144" data-location="Crayton Middle School" data-workout="swampfox" data-line1="5000 Clemson Ave" data-line2="Columbia, SC 29206">Crayton Middle School</a><br />
<a href="https://goo.gl/maps/1sZjp" target="_blank" class="ao-location" data-lat="33.9950528" data-lng="-81.0087192" data-location="Hand Middle School" data-workout="thunder" data-line1="2600 Wheat St" data-line2="Columbia, SC 29205">Hand Middle School</a><br />
<a href="https://goo.gl/maps/THKgy" target="_blank" class="ao-location" data-lat="33.9720227" data-lng="-80.9668456" data-location="Woodland Park" data-workout="woodshed" data-line1="6500 Olde Knight Pkwy" data-line2="Columbia, SC 29209">Woodland Park</a><br />
<a href="https://goo.gl/maps/3QniQ" target="_blank" class="ao-location" data-lat="33.9854715" data-lng="-80.9600782" data-location="Hampton Park" data-workout="legion" data-line1="1041 Brandon Ave" data-line2="Columbia, SC 29209">Hampton Park</a><br />
<a href="https://goo.gl/maps/mA7sfUeoKwE2" target="_blank" class="ao-location" data-lat="34.0383611" data-lng="-80.9734916" data-location="Satchel Ford Elementary School" data-workout="hammer" data-line1="5901 Satchel Ford Rd" data-line2="Columbia, SC 29206">Satchel Ford Elementary School</a><br />
<a href="https://goo.gl/maps/r3ADP" target="_blank" class="ao-location" data-lat="33.998525" data-lng="-80.994108" data-location="Dreher High School" data-workout="amble" data-line1="3319 Millwood Ave" data-line2="Columbia, SC 29205">Dreher High School</a><br />
<a href="https://goo.gl/maps/THKgy" target="_blank" class="ao-location" data-lat="33.9720227" data-lng="-80.9668456" data-location="Woodland Park" data-workout="stumble" data-line1="6500 Olde Knight Pkwy" data-line2="Columbia, SC 29209">Woodland Park</a><br />
<a href="https://goo.gl/maps/paFEp" target="_blank" class="ao-location" data-lat="34.0182692" data-lng="-80.9648756" data-location="Trenholm Park" data-workout="scramble" data-line1="3900 Covenant" data-line2="Columbia, SC 29204">Trenholm Park</a><br />
<a href="https://goo.gl/maps/x0MXJ" target="_blank" class="ao-location" data-lat="33.998694" data-lng="-81.006017" data-location="Shandon Presbyterian" data-workout="ramble" data-line1="607 Woodrow St" data-line2="Columbia, SC 29205">Shandon Presbyterian</a><br />
<a href="https://goo.gl/maps/THKgy" target="_blank" class="ao-location" data-lat="33.9720227" data-lng="-80.9668456" data-location="Woodland Park" data-workout="grit" data-line1="6500 Olde Knight Pkwy" data-line2="Columbia, SC 29209">Woodland Park</a><br />
<a href="https://goo.gl/maps/r3ADP" target="_blank" class="ao-location" data-lat="33.998525" data-lng="-80.994108" data-location="Dreher High School" data-workout="blue falcon" data-line1="3319 Millwood Ave" data-line2="Columbia, SC 29205">Dreher High School</a><br />
<a href="https://goo.gl/maps/FkaUkbzMgKS2" target="_blank" class="ao-location" data-lat="33.9927778" data-lng="-80.9504083" data-location="Kings Grant Clubhouse" data-workout="castle" data-line1="300 N Kings Grant Dr" data-line2="Columbia, SC 29209">Kings Grant Clubhouse</a><br />
<a href="https://goo.gl/maps/r3ADP" target="_blank" class="ao-location" data-lat="33.998525" data-lng="-80.994108" data-location="Dreher High School" data-workout="brickpile" data-line1="3319 Millwood Ave" data-line2="Columbia, SC 29205">Dreher High School</a><br />
<a href="https://goo.gl/maps/r3ADP" target="_blank" class="ao-location" data-lat="33.998525" data-lng="-80.994108" data-location="Dreher High School" data-workout="score" data-line1="3319 Millwood Ave" data-line2="Columbia, SC 29205">Dreher High School</a><br />
<a href="https://goo.gl/maps/vcOuI" target="_blank" class="ao-location" data-lat="34.016526" data-lng="-80.973144" data-location="Crayton Middle School" data-workout="swampfox" data-line1="5000 Clemson Ave" data-line2="Columbia, SC 29206">Crayton Middle School</a><br />
<a href="https://goo.gl/maps/1sZjp" target="_blank" class="ao-location" data-lat="33.9950528" data-lng="-81.0087192" data-location="Hand Middle School" data-workout="thunder" data-line1="2600 Wheat St" data-line2="Columbia, SC 29205">Hand Middle School</a><br />
<a href="https://goo.gl/maps/THKgy" target="_blank" class="ao-location" data-lat="33.9720227" data-lng="-80.9668456" data-location="Woodland Park" data-workout="woodshed" data-line1="6500 Olde Knight Pkwy" data-line2="Columbia, SC 29209">Woodland Park</a><br />
<a href="https://goo.gl/maps/3QniQ" target="_blank" class="ao-location" data-lat="33.9854715" data-lng="-80.9600782" data-location="Hampton Park" data-workout="legion" data-line1="1041 Brandon Ave" data-line2="Columbia, SC 29209">Hampton Park</a><br />
<a href="https://goo.gl/maps/mA7sfUeoKwE2" target="_blank" class="ao-location" data-lat="34.0383611" data-lng="-80.9734916" data-location="Satchel Ford Elementary School" data-workout="hammer" data-line1="5901 Satchel Ford Rd" data-line2="Columbia, SC 29206">Satchel Ford Elementary School</a><br />
<a href="https://goo.gl/maps/r3ADP" target="_blank" class="ao-location" data-lat="33.998525" data-lng="-80.994108" data-location="Dreher High School" data-workout="amble" data-line1="3319 Millwood Ave" data-line2="Columbia, SC 29205">Dreher High School</a><br />
<a href="https://goo.gl/maps/paFEp" target="_blank" class="ao-location" data-lat="34.0182692" data-lng="-80.9648756" data-location="Trenholm Park" data-workout="scramble" data-line1="3900 Covenant" data-line2="Columbia, SC 29204">Trenholm Park</a><br />
<a href="https://goo.gl/maps/x0MXJ" target="_blank" class="ao-location" data-lat="33.998694" data-lng="-81.006017" data-location="Shandon Presbyterian" data-workout="ramble" data-line1="607 Woodrow St" data-line2="Columbia, SC 29205">Shandon Presbyterian</a><br />
<a href="https://goo.gl/maps/r3ADP" target="_blank" class="ao-location" data-lat="33.998525" data-lng="-80.994108" data-location="Dreher High School" data-workout="iron yard" data-line1="3319 Millwood Ave" data-line2="Columbia, SC 29205">Dreher High School</a><br />
<a href="https://goo.gl/maps/FkaUkbzMgKS2" target="_blank" class="ao-location" data-lat="33.9927778" data-lng="-80.9504083" data-location="Kings Grant Clubhouse" data-workout="castle" data-line1="300 N Kings Grant Dr" data-line2="Columbia, SC 29209">Kings Grant Clubhouse</a><br />
<a href="https://goo.gl/maps/r3ADP" target="_blank" class="ao-location" data-lat="33.998525" data-lng="-80.994108" data-location="Dreher High School" data-workout="dawnstrike" data-line1="3319 Millwood Ave" data-line2="Columbia, SC 29205">Dreher High School</a><br />
<a href="https://goo.gl/maps/r3ADP" target="_blank" class="ao-location" data-lat="33.998525" data-lng="-80.994108" data-location="Dreher High School" data-workout="brickpile" data-line1="3319 Millwood Ave" data-line2="Columbia, SC 29205">Dreher High School</a><br />
<a href="https://goo.gl/maps/r3ADP" target="_blank" class="ao-location" data-lat="33.998525" data-lng="-80.994108" data-location="Dreher High School" data-workout="score" data-line1="3319 Millwood Ave" data-line2="Columbia, SC 29205">Dreher High School</a><br />
<a href="https://goo.gl/maps/FgAXyhmSKq42" target="_blank" class="ao-location" data-lat="34.016452" data-lng="-80.984564" data-location="AC Flora High School" data-workout="battle" data-line1="1 Falcon Dr" data-line2="Columbia, SC 29204">AC Flora High School</a><br />
<a href="https://goo.gl/maps/THKgy" target="_blank" class="ao-location" data-lat="33.9720227" data-lng="-80.9668456" data-location="Woodland Park" data-workout="woodshed" data-line1="6500 Olde Knight Pkwy" data-line2="Columbia, SC 29209">Woodland Park</a><br />
<a href="https://goo.gl/maps/VpFqw" target="_blank" class="ao-location" data-lat="34.0052283" data-lng="-81.0427452" data-location="Finley Park" data-workout="the mission" data-line1="905 Taylor St" data-line2="Columbia, SC 29201">Finley Park</a><br />
    </div>

<script>
    // https://www.google.com/maps/place//@33.9981442,-80.9907453,14.79z/data=!4m5!3m4!1s0x0:0x97f699dd46da92e9!8m2!3d33.9991702!4d-80.9940058
    var map, infoWindows;
    function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
            center: { lat: 34.0088279, lng: -80.99547369999999},
            zoom: 12
        });

        infoWindow = new google.maps.InfoWindow();

        var data = [];
        jQuery('.ao-location').each(function(index, item) {
            data.push($(item).data());
        });
        data = groupLocations(data);
        jQuery.each(data, function(i, data) {
            mapao(
                data.lat, 
                data.lng, 
                data.location, 
                data.workout,    
                data.line1, 
                data.line2 
            );
        });
    }

    function handleLocationError(browserHasGeoLocation, infoWindow, pos) {
        infoWindow.setPosition(pos);
        infoWindow.setContent(browserHasGeoLocation ? 'Error: GeoLocation service failed.' : 'Error: Browser doesn\'t support goelocation');
        infoWindow.open(map);
    }

    function groupLocations(items) {
        // group each item by the lat/lng coordinates.
        var keys = [];

        $.each(items, function(i, data) {
            var existing = LatLngExists(keys, data.lat, data.lng);
            if (!existing) {
                keys.push({
                    lat: data.lat, 
                    lng: data.lng, 
                    location: data.location, 
                    workouts: [data.workout],
                    workout: '',
                    line1: data.line1, 
                    line2: data.line2
                });
            } 
            else {
                // lat/lng already exists. concatenate the workout(s)
                existing.workouts.push(data.workout);
            }
        });

        _.each(keys, function(key) {
            key.workout = _.uniq(key.workouts).join();
        });

        return keys;
    }

    function LatLngExists(items, lat, lng) {
        for (var i = 0; i < items.length; i++) {
            var item = items[i];
            if (item.lat == lat && item.lng == lng) {
                return item;
            }
        }

        return null;
    }

    function mapao(lat, lng, name, workout, line1, line2) {
        if (!map) return;

        var marker = new google.maps.Marker({
            position: new google.maps.LatLng(lat, lng), 
            map: map, 
            title: workout
        });

        marker.addListener('click', function(evt) {

var txt = '<div id="content">';
txt += '<h1>' + workout + '</h1>';
txt += '<div class="info-body">';
txt += '<p>';
txt += name + '<br />';
txt += line1 + '<br />';
txt += line2 + '<br />';
txt += '</p></div></div>';

            var iw = new google.maps.InfoWindow({
                content: txt
            });
            iw.open(map, marker);
        });

        // var marker = new google.maps.InfoWindow();
        // marker.setPosition(new google.maps.LatLng(lat, lng));
        // marker.setContent(workout);
        // marker.open(map);
    }
</script>
    <style>
        /* Always set the map height explicitly to define the size of the div
            * element that contains the map. */
        #map {
            height: 400px;
            width: 80%;
        }   
        /* Optional: Makes the sample page fill the window. */
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
        </style>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha256-k2WSCIexGzOj3Euiig+TlR8gA0EmPjuc79OEeY5L45g=" crossorigin="anonymous"></script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDJC42uUh2OM92Xsb8dGt5wsqxDJaQn3Ao&callback=initMap"></script>
    <script src="js/underscore.js"></script>
</body>

</html>